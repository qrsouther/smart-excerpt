modules:
  macro:
    - key: blueprint-standard-source
      title: Blueprint Standard - Source
      description: Create a reusable Blueprint Standard that can be embedded on other pages (v7.15.0)
      layout: bodied
      resource: source-display-resource
      render: native
      resolver:
        function: resolver
      config:
        resource: source-config-resource
        render: native
        viewportSize: max

    - key: blueprint-standard-embed
      title: Blueprint Standard - Embed
      description: Embed a Blueprint Standard from another page (v7.15.0)
      resource: embed-display
      render: native
      resolver:
        function: resolver

  confluence:globalSettings:
    - key: blueprint-standards-admin
      title: Blueprint Standards Admin
      resource: admin-page
      render: native
      resolver:
        function: resolver

  consumer:
    - key: check-includes-consumer
      queue: check-includes-queue
      function: check-includes-worker

    - key: migration-consumer
      queue: migration-queue
      function: migration-worker

  function:
    - key: resolver
      handler: index.handler

    - key: check-includes-worker
      handler: workers/checkIncludesWorker.handler
      timeoutSeconds: 900

    - key: migration-worker
      handler: workers/migrationWorker.handler
      timeoutSeconds: 900

resources:
  - key: source-display-resource
    path: src/source-display.jsx

  - key: source-config-resource
    path: src/source-config.jsx

  - key: embed-display
    path: src/embed-display.jsx

  - key: admin-page
    path: src/admin-page.jsx

app:
  id: ari:cloud:ecosystem::app/be1ff96b-d44d-4975-98d3-25b80a813bdd
  runtime:
    name: nodejs22.x

permissions:
  scopes:
    - read:confluence-content.all
    - read:confluence-space.summary
    - read:space:confluence
    - read:page:confluence
    - write:page:confluence
    - write:confluence-content
    - search:confluence
    - storage:app
